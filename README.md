# E站功能加强 已收藏显隐切换/黑名单/下一页预加载

> 专门为exhentai设计，一些好用的快捷功能

- **需要独立的个人账号（_收藏相关_）**
- **只支持里站（_exhentai_）**

<a href="https://github.com/ShineByPupil/filterFavorites/raw/main/filterFavorites.user.js">点击此处安装</a>

## 一、快速设置收藏（搜索页/详情页）

> 鼠标悬停在画廊封面上，显示设置收藏的按钮。点击按钮直接更新收藏状态，无需进入弹窗设置页面

- **独立按钮**
  - 取消收藏按钮。将画廊从收藏夹移除
  - 刷新按钮。当更新了收藏设置后，需要手动触发方可生效
- **额外补充**
  - 搜索页只有 `扩展` `缩略图` 模式支持显示封面
  - 只显示自定义名称的收藏按钮，`Favorites 0` 等默认名称将被过滤

## 二、切换显示/隐藏画廊（搜索页）

### 1. 切换以收藏画廊的显示和隐藏

> 点击右下角的按钮(`点击显示`或`点击隐藏`)，**隐藏已收藏的画廊，聚焦新的画廊**

按钮状态存储在浏览器的本地缓存。第二次进入页面时，按钮记忆状态。

### 2. 黑名单：设置总是隐藏某个收藏下的画廊

> 标签能够设置隐藏，但是所有的标签规则限制100条，显然不够用

- **总是过滤**
  - 功能：过滤 缺页、重复、低质量等画廊
  - 操作：点击按钮并在对话框输入`收藏夹名称` （如：过滤），将这类画廊收藏到这个收藏夹
  - 失误添加：在收藏页面取消收藏即可恢复原状
- **过滤全部**
  - 功能：过滤当前页面所有画廊（已收藏除外）

## 三、生成文件名（详情页）

> 保留画廊的关键信息，并在后面追加当前账号关注的标签

- **关注的标签**
  - 文件名末尾添加 `关注的标签`，权重越大，位置越靠前
  - 配合其他插件翻译标签信息，如 `EhSyringe`
- **移除冗余的信息**
  - `汉化`、`翻訳`、`Chinese`、`無修正`、`DL版` 等
- **其他**
  - 文件名优先采用 `日文`，如果没有则使用 `罗马文`
  - `［` `］` `（` `）` 字符统一替换为 `[` `]` `(` `)`
  - `<` `>` `:` `"` `/` `\` `|` `?` `*` 等特殊字符不能参与文件命名，替换为一个空格

## 四、鼠标中键快捷功能（详情页）

> 鼠标中键默认打开新标签页但不跳转，`chrome` 的 `Tab Activate` 插件优化为打开并跳转

- **中键画廊标签**
  - 优化前：
    - 后台打开 `https://exhentai.org/tag/` 新标签页
  - 优化后：
    - 搜索条件：`标签` + `语言` + `只显示有种画廊`
    - 打开并显示新标签页
- **中键种子下载**
  - 优化前：
    - 中键只会打开详情页，不会打开种子下载。只能左键打开小窗口
  - 优化后：
    - 中键打开种子下载新标签页，并显示

## 五、下一页图片预加载（搜索页）

> 浏览器空闲时间，自动加载下一页的图片
